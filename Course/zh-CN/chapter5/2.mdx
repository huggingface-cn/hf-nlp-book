# å¦‚æœæˆ‘çš„æ•°æ®é›†ä¸åœ¨ Hub ä¸Šæ€ä¹ˆåŠï¼Ÿ [[å¦‚æœæˆ‘çš„æ•°æ®é›†ä¸åœ¨ Hub ä¸Šæ€ä¹ˆåŠï¼Ÿ]]

<CourseFloatingBanner chapter={5}
  classNames="absolute z-10 right-0 top-0"
  notebooks={[
    {label: "Google Colab", value: "https://colab.research.google.com/github/huggingface/notebooks/blob/master/course/zh-CN/chapter5/section2.ipynb"},
    {label: "Aws Studio", value: "https://studiolab.sagemaker.aws/import/github/huggingface/notebooks/blob/master/course/zh-CN/chapter5/section2.ipynb"},
]} />

ä½ çŸ¥é“å¦‚ä½•ä½¿ç”¨[Hugging Face Hub](https://huggingface.co/datasets)ä¸‹è½½æ•°æ®é›†,ä½†ä½ å¾€å¾€ä¼šå‘ç°è‡ªå·±éœ€è¦å¤„ç†åœ¨è‡ªå·±çš„ç¬”è®°æœ¬ç”µè„‘æˆ–è€…ç½‘ç»œä¸Šçš„æ•°æ®é›†ã€‚åœ¨æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬å°†å±•ç¤ºå¦‚ä½•ä½¿ç”¨ğŸ¤— DatasetsåŠ è½½ä¸åœ¨Hugging Face Hubä¸Šçš„æ•°æ®é›†ã€‚

<Youtube id="HyQgpJTkRdE"/>

## ä½¿ç”¨æœ¬åœ°å’Œè¿œç¨‹æ•°æ®é›† [[ä½¿ç”¨æœ¬åœ°å’Œè¿œç¨‹æ•°æ®é›†]]

ğŸ¤— Datasets æä¾›äº†åŠ è½½æœ¬åœ°å’Œè¿œç¨‹æ•°æ®é›†çš„æ–¹æ³•ã€‚å®ƒæ”¯æŒå‡ ç§å¸¸è§çš„æ•°æ®æ ¼å¼ï¼Œä¾‹å¦‚ï¼š

|       æ•°æ®æ ¼å¼      |    ç±»å‹å‚æ•°    |                         ç¤ºä¾‹                            |
| :----------------: | :------------: | :-----------------------------------------------------: |
|     CSV & TSV      |     `csv`      |     `load_dataset("csv", data_files="my_file.csv")`     |
|     Text files     |     `text`     |    `load_dataset("text", data_files="my_file.txt")`     |
| JSON & JSON Lines  |     `json`     |   `load_dataset("json", data_files="my_file.jsonl")`    |
| Pickled DataFrames |    `pandas`    | `load_dataset("pandas", data_files="my_dataframe.pkl")` |

å¦‚è¡¨æ‰€ç¤ºï¼Œå¯¹äºæ¯ç§æ•°æ®æ ¼å¼ï¼Œæˆ‘ä»¬åªéœ€è¦åœ¨ `load_dataset()` å‡½æ•°ä¸­æŒ‡å®šæ•°æ®çš„ç±»å‹ï¼Œä½¿ç”¨ `data_files` æŒ‡å®šä¸€ä¸ªæˆ–å¤šä¸ªæ–‡ä»¶çš„è·¯å¾„çš„å‚æ•°ã€‚é¦–å…ˆï¼Œæˆ‘ä»¬ä»åŠ è½½æœ¬åœ°æ–‡ä»¶çš„æ•°æ®é›†å¼€å§‹ï¼›ç¨åï¼Œæˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•ä½¿ç”¨è¿œç¨‹æ–‡ä»¶åšåŒæ ·çš„äº‹æƒ…ã€‚

## åŠ è½½æœ¬åœ°æ•°æ®é›† [[åŠ è½½æœ¬åœ°æ•°æ®é›†]]

å¯¹äºè¿™ä¸ªä¾‹å­ï¼Œæˆ‘ä»¬å°†ä½¿ç”¨ [SQuAD-it æ•°æ®é›†](https://github.com/crux82/squad-it/), è¿™æ˜¯ä¸€ä¸ªç”¨äºæ„å¤§åˆ©è¯­é—®é¢˜å›ç­”çš„å¤§è§„æ¨¡æ•°æ®é›†ã€‚

è®­ç»ƒé›†å’Œæµ‹è¯•é›†éƒ½æ‰˜ç®¡åœ¨ GitHub ä¸Š, å› æ­¤æˆ‘ä»¬å¯ä»¥é€šè¿‡`wget`å‘½ä»¤éå¸¸ç®€å•åœ°ä¸‹è½½å®ƒä»¬:

```python
!wget https://github.com/crux82/squad-it/raw/master/SQuAD_it-train.json.gz
!wget https://github.com/crux82/squad-it/raw/master/SQuAD_it-test.json.gz
```

è¿™å°†ä¸‹è½½ä¸¤ä¸ªåä¸º*SQuAD_it-train.json.gz* å’Œ *SQuAD_it-test.json.gz*çš„å‹ç¼©æ–‡ä»¶, æˆ‘ä»¬å¯ä»¥ç”¨Linuxçš„ `gzip` å‘½ä»¤è§£å‹ä»–ä»¬:

```python
!gzip -dkv SQuAD_it-*.json.gz
```

```bash
SQuAD_it-test.json.gz:	   87.4% -- replaced with SQuAD_it-test.json
SQuAD_it-train.json.gz:	   82.2% -- replaced with SQuAD_it-train.json
```

æˆ‘ä»¬å¯ä»¥çœ‹åˆ°å‹ç¼©æ–‡ä»¶å·²ç»è¢«æ›¿æ¢ä¸ºSQuAD_it-train.jsonå’ŒSQuAD_it-test.json,å¹¶ä¸”æ•°æ®ä»¥ JSON æ ¼å¼å­˜å‚¨ã€‚

<Tip>

  å¦‚æœä½ æƒ³çŸ¥é“ä¸ºä»€ä¹ˆä¸Šé¢çš„shellå‘½ä»¤ä¸­æœ‰ä¸€ä¸ª`!`,é‚£æ˜¯å› ä¸ºæˆ‘ä»¬æ˜¯åœ¨ Jupyter notebook ä¸­è¿è¡Œå®ƒä»¬ã€‚å¦‚æœæ‚¨æƒ³åœ¨å‘½ä»¤è¡Œä¸­ä¸‹è½½å’Œè§£å‹ç¼©æ•°æ®é›†ï¼Œåªéœ€åˆ é™¤å‰ç¼€!å³å¯ã€‚

</Tip>

ä½¿ç”¨`load_dataset()`å‡½æ•°æ¥åŠ è½½JSONæ–‡ä»¶, æˆ‘ä»¬éœ€è¦çŸ¥é“æˆ‘ä»¬æ˜¯åœ¨å¤„ç†æ™®é€šçš„ JSON(ç±»ä¼¼äºåµŒå¥—å­—å…¸)è¿˜æ˜¯ JSON Lines(æ¯ä¸€è¡Œéƒ½æ˜¯ä¸€ä¸ªJSON)ã€‚åƒè®¸å¤šé—®ç­”æ•°æ®é›†ä¸€æ ·, SQuAD-it ä½¿ç”¨åµŒå¥—æ ¼å¼,æ‰€æœ‰æ–‡æœ¬éƒ½å­˜å‚¨åœ¨ `data`å­—æ®µä¸­ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡æŒ‡å®šå‚æ•°`field`æ¥åŠ è½½æ•°æ®é›†,å¦‚ä¸‹æ‰€ç¤º:

```py
from datasets import load_dataset

squad_it_dataset = load_dataset("json", data_files="SQuAD_it-train.json", field="data")
```

é»˜è®¤æƒ…å†µä¸‹, åŠ è½½æœ¬åœ°æ–‡ä»¶ä¼šåˆ›å»ºä¸€ä¸ªå¸¦æœ‰`train`æ ‡ç­¾çš„`DatasetDict` å¯¹è±¡ã€‚  æˆ‘ä»¬å¯ä»¥åœ¨è¿™é‡ŒæŸ¥çœ‹ä¸€ä¸‹ `squad_it_dataset`å¯¹è±¡:

```py
squad_it_dataset
```

```python out
DatasetDict({
    train: Dataset({
        features: ['title', 'paragraphs'],
        num_rows: 442
    })
})
```

è¾“å‡ºäº†ä¸è®­ç»ƒé›†çš„è¡Œæ•°å’Œåˆ—åã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ `train` æ ‡ç­¾æ¥æŸ¥çœ‹ä¸€ä¸ªç¤ºä¾‹ï¼Œå¦‚ä¸‹æ‰€ç¤º:

```py
squad_it_dataset["train"][0]
```

```python out
{
    "title": "Terremoto del Sichuan del 2008",
    "paragraphs": [
        {
            "context": "Il terremoto del Sichuan del 2008 o il terremoto...",
            "qas": [
                {
                    "answers": [{"answer_start": 29, "text": "2008"}],
                    "id": "56cdca7862d2951400fa6826",
                    "question": "In quale anno si Ã¨ verificato il terremoto nel Sichuan?",
                },
                ...
            ],
        },
        ...
    ],
}
```

å¾ˆå¥½, æˆ‘ä»¬å·²ç»åŠ è½½äº†æˆ‘ä»¬çš„ç¬¬ä¸€ä¸ªæœ¬åœ°æ•°æ®é›†! ä½†æ˜¯, ä»…ä»…åŠ è½½äº†è®­ç»ƒé›†, æˆ‘ä»¬çœŸæ­£æƒ³è¦çš„æ˜¯åŒ…æ‹¬ `train` å’Œ `test` çš„ `DatasetDict` å¯¹è±¡ã€‚è¿™æ ·çš„è¯å°±å¯ä»¥ä½¿ç”¨ `Dataset.map()` å‡½æ•°åŒæ—¶å¤„ç†è®­ç»ƒé›†å’Œæµ‹è¯•é›†ã€‚ ä¸ºæ­¤, æˆ‘ä»¬å‘`data_files`å‚æ•°è¾“å…¥ä¸€ä¸ªå­—å…¸,å°†æ ‡ç­¾åæ˜ å°„åˆ°ç›¸å…³è”çš„æ–‡ä»¶ï¼š

```py
data_files = {"train": "SQuAD_it-train.json", "test": "SQuAD_it-test.json"}
squad_it_dataset = load_dataset("json", data_files=data_files, field="data")
squad_it_dataset
```

```python out
DatasetDict({
    train: Dataset({
        features: ['title', 'paragraphs'],
        num_rows: 442
    })
    test: Dataset({
        features: ['title', 'paragraphs'],
        num_rows: 48
    })
})
```

è¿™æ­£æ˜¯æˆ‘ä»¬æƒ³è¦çš„ã€‚ç°åœ¨ï¼Œæˆ‘ä»¬å¯ä»¥åº”ç”¨å„ç§é¢„å¤„ç†æŠ€æœ¯æ¥æ¸…ç†æ•°æ®ã€æ ‡è®°åŒ–è¯„è®ºç­‰ç­‰ã€‚

<Tip>

`load_dataset()`å‡½æ•°çš„`data_files`å‚æ•°éå¸¸çµæ´»å¹¶ä¸”å¯ä»¥æ˜¯å•ä¸ªæ–‡ä»¶è·¯å¾„ã€æ–‡ä»¶è·¯å¾„åˆ—è¡¨æˆ–æ ‡ç­¾å’Œæ–‡ä»¶è·¯å¾„çš„å­—å…¸ã€‚æ‚¨è¿˜å¯ä»¥æ ¹æ®Unix shellä½¿ç”¨çš„è§„åˆ™å¯¹ä¸æŒ‡å®šæ¨¡å¼åŒ¹é…çš„æ–‡ä»¶è¿›è¡ŒåŒ¹é…ï¼ˆä¾‹å¦‚ï¼Œæ‚¨å¯ä»¥é€šè¿‡è®¾ç½®'data_files=â€œ*.JSONâ€'å°†ç›®å½•ä¸­çš„æ‰€æœ‰JSONæ–‡ä»¶ä½œä¸ºå•ä¸ªéƒ¨åˆ†è¿›è¡Œå…¨å±€å®šä½ï¼‰ã€‚æœ‰å…³æ›´å¤šè¯¦ç»†ä¿¡æ¯ï¼Œè¯·å‚é˜…[ğŸ¤—Datasets æ–‡æ¡£](https://huggingface.co/docs/datasets/v2.12.0/en/loading#local-and-remote-files)ã€‚

</Tip>

ğŸ¤— Datasetså®é™…ä¸Šæ”¯æŒè‡ªåŠ¨è§£å‹è¾“å…¥æ–‡ä»¶,æ‰€ä»¥æˆ‘ä»¬å¯ä»¥è·³è¿‡ä½¿ç”¨`gzip`,ç›´æ¥å°†`data_files`å‚æ•°è®¾ç½®ä¸ºå‹ç¼©æ–‡ä»¶:

```py
data_files = {"train": "SQuAD_it-train.json.gz", "test": "SQuAD_it-test.json.gz"}
squad_it_dataset = load_dataset("json", data_files=data_files, field="data")
```

å¦‚æœæ‚¨ä¸æƒ³æ‰‹åŠ¨è§£å‹ç¼©è®¸å¤š GZIP æ–‡ä»¶ï¼Œè¿™ä¼šå¾ˆæœ‰ç”¨ã€‚è‡ªåŠ¨è§£å‹ä¹Ÿæ”¯æŒäºå…¶ä»–å¸¸è§æ ¼å¼,å¦‚ ZIP å’Œ TAR,å› æ­¤æ‚¨åªéœ€å°† `data_files` è®¾ç½®ä¸ºå‹ç¼©æ–‡ä»¶æ‰€åœ¨çš„è·¯å¾„,æ¥ä¸‹æ¥å°±äº¤ç»™ğŸ¤— Datasetså§!

ç°åœ¨ä½ çŸ¥é“å¦‚ä½•åœ¨ç¬”è®°æœ¬ç”µè„‘æˆ–å°å¼æœºä¸ŠåŠ è½½æœ¬åœ°æ–‡ä»¶ï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹åŠ è½½è¿œç¨‹æ–‡ä»¶ã€‚

## åŠ è½½è¿œç¨‹æ•°æ®é›† [[åŠ è½½è¿œç¨‹æ•°æ®é›†]]

å¦‚æœä½ åœ¨å…¬å¸æ‹…ä»»æ•°æ®ç ”ç©¶å‘˜æˆ–ç¼–ç å‘˜,é‚£ä¹ˆä½ è¦åˆ†æçš„æ•°æ®é›†å¾ˆæœ‰å¯èƒ½å­˜å‚¨åœ¨æŸä¸ªè¿œç¨‹æœåŠ¡å™¨ä¸Šã€‚å¹¸è¿çš„æ˜¯,åŠ è½½è¿œç¨‹æ–‡ä»¶å°±åƒåŠ è½½æœ¬åœ°æ–‡ä»¶ä¸€æ ·ç®€å•!æˆ‘ä»¬åªéœ€è¦å°†`load_dataset()`çš„`data_files`å‚æ•°æŒ‡å‘å­˜å‚¨è¿œç¨‹æ–‡ä»¶çš„ä¸€ä¸ªæˆ–å¤šä¸ªURLã€‚ä¾‹å¦‚, å¯¹äºæ‰˜ç®¡åœ¨ GitHub ä¸Šçš„ SQuAD-it æ•°æ®é›†, æˆ‘ä»¬å¯ä»¥å°† `data_files` è®¾ç½®ä¸ºæŒ‡å‘ _SQuAD_it-*.json.gz_ çš„ç½‘å€,å¦‚ä¸‹æ‰€ç¤º:

```py
url = "https://github.com/crux82/squad-it/raw/master/"
data_files = {
    "train": url + "SQuAD_it-train.json.gz",
    "test": url + "SQuAD_it-test.json.gz",
}
squad_it_dataset = load_dataset("json", data_files=data_files, field="data")
```

è¿™å°†è¿”å›å’Œä¸Šé¢çš„æœ¬åœ°ä¾‹å­ç›¸åŒçš„ `DatasetDict` å¯¹è±¡, ä½†çœå»äº†æˆ‘ä»¬æ‰‹åŠ¨ä¸‹è½½å’Œè§£å‹ _SQuAD_it-*.json.gz_ æ–‡ä»¶çš„æ­¥éª¤ã€‚è¿™æ˜¯æˆ‘ä»¬å¯¹åŠ è½½æœªæ‰˜ç®¡åœ¨Hugging Face Hubçš„æ•°æ®é›†çš„å„ç§æ–¹æ³•çš„æ€»ç»“ã€‚æ—¢ç„¶æˆ‘ä»¬å·²ç»æœ‰äº†ä¸€ä¸ªå¯ä»¥ä½¿ç”¨çš„æ•°æ®é›†,è®©æˆ‘ä»¬å¼€å§‹å¤§å±•èº«æ‰‹å§ï¼

<Tip>

âœï¸ **è¯•è¯•çœ‹!** é€‰æ‹©æ‰˜ç®¡åœ¨GitHubæˆ–[UCI æœºå™¨å­¦ä¹ ä»“åº“](https://archive.ics.uci.edu/ml/index.php)ä¸Šçš„å¦ä¸€ä¸ªæ•°æ®é›†å¹¶å°è¯•ä½¿ç”¨ä¸Šè¿°æŠ€æœ¯åœ¨æœ¬åœ°å’Œè¿œç¨‹åŠ è½½å®ƒã€‚å¦å¤–,å¯ä»¥å°è¯•åŠ è½½CSVæˆ–è€…æ–‡æœ¬æ ¼å¼å­˜å‚¨çš„æ•°æ®é›†(æœ‰å…³è¿™äº›æ ¼å¼çš„æ›´å¤šä¿¡æ¯,è¯·å‚é˜…[æ–‡æ¡£](https://huggingface.co/docs/datasets/loading.html#local-and-remote-files))ã€‚

</Tip>


